"use strict";export default class r{static e=null;get Range(){return 200}isTouchMode=!0;isInit=!1;elements;constructor(){this.elements=new Map,this.isInit||(this.updateElements(),window.addEventListener("mousemove",this.onMovement),window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onScroll,!0),this.testDevice(),this.isInit=!0)}static get instance(){return this.e||(this.e=new r),this.e}addElement(e,i){this.elements.set(e,{...i,cx:0,cy:0,inRange:!1,skip:!1}),this.updateElementPosition(e)}removeElement(e){this.elements.delete(e)}updateElements(){for(const e of this.elements.keys())this.updateElementPosition(e)}updateElementPosition(e){const i=e.getBoundingClientRect(),n=i.left+i.width/2,t=i.top+i.height/2,s=this.elements.get(e);s&&(s.cx=n,s.cy=t,s.skip=!this.isElementVisible(i))}isElementVisible(e){return e.bottom>=0&&e.top<=window.innerHeight&&e.right>=0&&e.left<=window.innerWidth}touchPosition=[0,0];lastMousePos=[0,0];onMovement=e=>{let i=0,n=0;this.isTouchMode?(i=this.touchPosition[0],n=this.touchPosition[1]):e?(i=e.clientX,n=e.clientY,this.lastMousePos=[e.clientX,e.clientY]):(i=this.lastMousePos[0],n=this.lastMousePos[1]),this.elements.forEach(t=>{if(t.disableOnTouch&&this.isTouchMode)return;if(t.skip){t.inRange===!0&&t.leaveCallback(),t.inRange=!1;return}const s=i-t.cx,o=n-t.cy,l=Math.hypot(s,o),a=t.range??this.Range;l<=a?(t.inRange===!1&&(t.enterCallback(),t.inRange=!0),t.moveCallback(s/a,o/a,l/a)):(t.inRange===!0&&t.leaveCallback(),t.inRange=!1)})};testDevice(){this.isTouchMode=isTouchDevice(),this.isTouchMode&&(this.touchPosition=[innerWidth/2,innerHeight/2])}onResize=c(()=>{this.testDevice(),this.updateElements(),this.onMovement()},100);onScroll=c(()=>{this.updateElements(),this.onMovement()},100)}function c(u,e){let i=null,n=null,t=null,s=!1;return function(...l){i?(n=l,t=this,s=!0):(u.apply(this,l),i=setTimeout(()=>{s&&n&&u.apply(t,n),i=null,n=null,t=null,s=!1},e))}}export function isTouchDevice(){return typeof window>"u"||typeof navigator>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}